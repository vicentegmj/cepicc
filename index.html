<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Registro Escolar CEPI CC</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>


  <div class="container">
    <div class="titulo">
      <h1>CEPI Cultura e Cooperativismo</h1>
      <p class="subtitulo">Registro Escolar</p>
    </div>
    <form id="registroForm">


      <div class="link-container">
        <div class="left-link">
          <label class="radio-container">
            <input type="radio" id="bom" name="opcao" checked />
            <span class="emoji">üòéüëç</span>

          </label>
        </div>
        <div class="right-link">
          <label class="radio-container">
            <input type="radio" id="mau" name="opcao" />
            <span class="emoji">üòîüëé</span>

          </label>
        </div>
      </div>

      <div>
        <label for="aluno">Aluno</label>
        <textarea id="myTextarea1" required></textarea>
      </div>

      <div class="buttons-container">
        <div class="left-button">
          <label for="turma">Turma</label>
          <select id="turma" class="combobox">
          </select>
        </div>
        <div class="right-button">
          <label for="tipo">Assunto</label>
          <select id="tipo" class="combobox1">
          </select>
        </div>
      </div>

      <div>
        <label for="descricao">Descri√ß√£o</label>
        <textarea id="myTextarea" required></textarea>
      </div>


      <div>
        <label for="andamento">Sujest√£o de Encaminhamento</label>
        <textarea id="myTextarea4"></textarea>
      </div>


      <div>
        <label for="relator">Observador</label>
        <textarea id="myTextarea2" required></textarea>
      </div>



      <label for="data">Data</label>
      <input type="date" id="data" name="data">

      <button type="click" id="shareBtn">Compartilhar Registro</button>

      <div class="email">
        <p class="subtitulo">Prof. Vicente (vicente.gmj@gmail.com)</p>
      </div>
      

    </form>
  </div>


  <script>
    var select = document.getElementById("turma");
    var data = [

      { "value": "0", "text": "7¬∫ A" },
      { "value": "1", "text": "7¬∫ B" },
      { "value": "2", "text": "8¬∫ A" },
      { "value": "3", "text": "8¬∫ B" },
      { "value": "4", "text": "9¬∫ A" },
      { "value": "5", "text": "9¬∫ B" },
      { "value": "6", "text": "1¬∫ A" },
      { "value": "7", "text": "1¬∫ B" },
      { "value": "8", "text": "2¬∫ A" },
      { "value": "9", "text": "2¬∫ B" },
      { "value": "10", "text": "3¬∫ A" },
      { "value": "11", "text": "3¬∫ B" },
      { "value": "12", "text": "Turmas" }
    ];

    for (var i = 0; i < data.length; i++) {
      var option = document.createElement("option");
      option.value = data[i].value;
      option.text = data[i].text;
      select.appendChild(option);
    }
  </script>

  <script>
    document.getElementById("bom").addEventListener("click", function () {
      setTipoOptions(true); // Chama a fun√ß√£o para definir os itens do tipo
    });

    document.getElementById("mau").addEventListener("click", function () {
      setTipoOptions(false); // Chama a fun√ß√£o para definir os itens do tipo
    });

    function setTipoOptions(isBom) {
      var select = document.getElementById("tipo");
      select.innerHTML = ""; // Limpa as op√ß√µes existentes

      var tipoData = [];

      if (isBom) {
        tipoData = [
          { "value": 0, "text": "Ponto Positivo" },
          { "value": 1, "text": "√ìtimo Comportamento" },
          { "value": 2, "text": "Ajudou o Professor" },
          { "value": 3, "text": "Ajudou o Colega" },
          { "value": 4, "text": "Colaborou com a limpeza da escola" },
          { "value": 5, "text": "Outro" },
        ];
      } else {
        tipoData =  [
          { "value": 0, "text": "Ponto de Aten√ß√£o" },
          { "value": 1, "text": "Indisciplina escolar" },
          { "value": 2, "text": "Falta de respeito" },
          { "value": 3, "text": "Pr√°tica de bullying" },
          { "value": 4, "text": "V√≠tima de bullying" },
          { "value": 5, "text": "Agress√µes/Amea√ßas" },
          { "value": 6, "text": "Ass√©dio moral/sexual" },
          { "value": 7, "text": "Viol√™ncia moral/sexual" },
          { "value": 8, "text": "Danos/Crimes contra o patrim√¥nio" },
          { "value": 9, "text": "Consumo de subst√¢ncias proibidas" },
          { "value": 10, "text": "Venda de subst√¢ncias proibidas" },
          { "value": 11, "text": "Posse de arma ou material perigoso" },
          { "value": 12, "text": "Aus√™ncia escolar" },
          { "value": 13, "text": "Outro" }
        ];
      }

      for (var i = 0; i < tipoData.length; i++) {
        var option = document.createElement("option");
        option.value = tipoData[i].value;
        option.text = tipoData[i].text;
        select.appendChild(option);
      }
    }
  </script>

  <script>
    var textarea = document.getElementById("myTextarea1");

    textarea.addEventListener("keydown", function (event) {
      if (event.key === "Enter") {
        event.preventDefault();
      }
    });
  </script>

  <script>
    var textarea = document.getElementById("myTextarea2");

    textarea.addEventListener("keydown", function (event) {
      if (event.key === "Enter") {
        event.preventDefault();
      }
    });
  </script>

  <script>
    document.getElementById("bom").addEventListener("click", function () {
      document.getElementById("shareBtn").style.backgroundColor = "#228800";
    });

    document.getElementById("mau").addEventListener("click", function () {
      document.getElementById("shareBtn").style.backgroundColor = "#b91228";
    });

  </script>


  <script>
    document.getElementById("shareBtn").addEventListener("click", function () {


      var radio1 = document.getElementById('bom');
      var bom = "";

      if (radio1.checked) {
        bom = "Ponto Positivo";
      } else {
        bom = "Indiciplina";
      }


      var relator = document.getElementById('myTextarea2').value;
      var aluno = document.getElementById('myTextarea1').value;
      var descricao = document.getElementById('myTextarea').value;
      var sujestao = document.getElementById('myTextarea4').value;

      var dataInput = document.getElementById('data');
      var dataAtual = new Date();
      var dia = dataAtual.getDate();
      var mes = dataAtual.getMonth() + 1; 
      var ano = dataAtual.getFullYear();
      var hora = dataAtual.getHours();
      var minutos = dataAtual.getMinutes();


      dia = dia < 10 ? '0' + dia : dia;
      mes = mes < 10 ? '0' + mes : mes;
      hora = hora < 10 ? '0' + hora : hora;
      minutos = minutos < 10 ? '0' + minutos : minutos;

      var dataFormatada = dia + '/' + mes + '/' + ano + ' ' + hora + ':' + minutos+'h';
      // dataInput.value = dataFormatada;


      var combobox = document.getElementById("turma");
      var turma = combobox.options[combobox.selectedIndex].text;

      var combobox = document.getElementById("tipo");
      var tipo = combobox.options[combobox.selectedIndex].text;

      if (relator && aluno && descricao && data && turma && tipo) {

        var emojiBom = '\u{1F44D}';
        var emojiMau = '\u{1F44E}';

        var clipboardContent = "";
        if (bom == "Ponto Positivo") {
          clipboardContent += emojiBom + " *" + bom + "* " + emojiBom + "\n";
        } else {
          clipboardContent += emojiMau + " *" + bom + "* " + emojiMau + "\n";
        };

        clipboardContent += "*Aluno:* " + aluno + "\n";
        clipboardContent += "*Turma:* " + turma + "\n";
        clipboardContent += "*Assunto:* " + tipo + "\n";
        clipboardContent += "*Descri√ß√£o:* " + descricao + "\n";
        if (sujestao != ''){
          clipboardContent += "*Sujest√£o de Encaminhamento:* " + sujestao + "\n";
        }   
        clipboardContent += "*Observador:* " + relator + "\n";
        clipboardContent += "\n";
        clipboardContent += "*Data:* " + dataFormatada + "\n";
        clipboardContent += "*CEPI Cultura e Cooperativismo*" + "\n";


        var mensagem = clipboardContent;

        if (navigator.share) {
          navigator.share({
            title: "Registro",
            text: mensagem
          })
        }

      }


    });

    var dataInput = document.getElementById('data');
    var dataAtual = new Date();
    var dataFormatada = dataAtual.toISOString().substring(0, 10);
    dataInput.value = dataFormatada;

  </script>


</body>

</html>